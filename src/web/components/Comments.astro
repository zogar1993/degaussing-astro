---
import i18next, {t} from "i18next"
const language = i18next.language
import KeepInTouch from "@web/components/KeepInTouch.astro"
import type {PageInfo} from "@server/GetPageInfo"
const protocol = import.meta.env.PROTOCOL!
const domain = import.meta.env.DOMAIN!

export interface Props {
	info: PageInfo
}

const {info} = Astro.props
---
<aside aria-label={t("landmarks.social")}>
    <KeepInTouch/>
    <section aria-label={t("landmarks.comments")}>
        <script
                src="https://giscus.app/client.js"
                data-repo="zogar1993/degaussing-astro"
                data-repo-id="R_kgDOIaWmTA"
                data-category="General"
                data-category-id="DIC_kwDOIaWmTM4CS02J"
                data-mapping="specific"
                data-term={`/${language}/chapters/${info.current.chapter}/pages/${info.current.page}/`}
                data-strict="0"
                data-reactions-enabled="0"
                data-emit-metadata="0"
                data-input-position="top"
                data-theme={`${protocol}://${domain}/styles/giscus.css`}
                data-lang={language}
                data-loading="lazy"
                crossorigin="anonymous"
                async
        ></script>
    </section>
</aside>
<style>
    aside {
        grid-area: comments;

        display: flex;
        flex-direction: column;
        gap: 2rem;

        background-color: var(--background-color-primary);
        border-radius: var(--border-radius);
        border: var(--border-wide);

        padding: 2.5rem 5.5rem;
    }

    @media (max-width: 60em) {
        aside {
            padding: 1.5rem 1rem;
        }
    }
</style>
