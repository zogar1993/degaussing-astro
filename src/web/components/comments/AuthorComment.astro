---
import {Image} from "astro:assets"
import i18next from "i18next"
import RichText from "@web/components/general/RichText.astro"
import Section from "../page-secondary/SecondaryPageSection.astro";
import getAuthorsInfo from "@server/actions/GetAuthorsInfo"
import getLocalizedDate from "@server/date/GetLocalizedDate"
import type {PageInfo} from "@server/GetPageInfo"


export interface Props {
	info: PageInfo
}

const {info} = Astro.props
const language = i18next.language

const authors = await getAuthorsInfo({language})
const lucy = authors.find(author => author.slug === "lucy")
const date = getLocalizedDate({date: info.createdAt, language})
---
{info.author_comment &&
    <Section>
        <h2 class="heading">{"Creator"}</h2>
        <div class="header">
            <Image src={lucy.portrait} alt="" width={48} height={48}/>
            <span>{lucy.name}</span>
            <time class="header-date" datetime={date.datetime}>{date.localized}</time>
        </div>
        <RichText text={info.author_comment}/>
    </Section>
}
<style>
    section {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        --author-comment_font-size: 1rem;
        --rich-text_font-size: var(--author-comment_font-size);
    }

    .header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: bold;
        font-size: var(--author-comment_font-size);
    }

    .header-date {
        color: var(--color-muted);
    }


    .heading {
        font-family: var(--font-family-title);
        font-style: normal;
        font-weight: 400;
        font-size: 2rem;
        line-height: 1.25em;
        color: var(--color-title);
    }
</style>